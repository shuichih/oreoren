[General]
#windowWidth=384
#windowHeight=246
windowWidth=1280
windowHeight=720
drawBBox=false
rendererType=2

[BVH]
build = true
type = 2  # 0:BBVH 1:QBVH_SISD 2:QBVH_SIMD
useSIMD = true
draw = false
drawDepth = 7

[Material]
name = Mirror
color = .999 .999 .999
refl = SPEC

[Material]
name = Glass
color = 1 1 1
refl = REFR
refrIndex = 1.5

[Material]
name = BlueGlass
color = 0.4 0.7 1
refl = REFR
refrIndex = 1.5

[Material]
name = Glass2
color = 0.9 0.9 0.9
refl = REFR
refrIndex = 1.5

[Material]
name = Black
color = 0.1 0.1 0.1
refl = DIFF

[Material]
name = CornellRed
color = .95 .60 .50
refl = DIFF

[Material]
name = CornellBlue
color = .50 .60 .95
refl = DIFF

[Material]
name = CornellGray
color = .85 .85 .85
refl = DIFF

[Material]
name = DarkGray
color = .25 .25 .25
refl = DIFF

[Material]
name = Water
refl = REFR
color = 0.8 1.0 0.95
refrIndex = 1.333

[RayTracing]
maxRayBounce = 6
nSubPixelsSqrt = 1
useTentFilter = false
distanceToProjPlane=140

[PhotonMapRenderer]
directLight = true
indirectLight = true
caustic = true
shadowEstimate = true
drawShadowEstimate = false
nSubPixelsSqrt = 2
nTracePhotonsPerThread = 10000
maxRayBounce = 10
#finalGethering = true
nFinalGetheringRays = 64
nMaxGlossyBounce = 1
nGlossyRays = 256

[PhotonMap] # for Indirect Light
enable = true
#nPhotons = 10000
nPhotons = 100000
nMaxStorePhotons = 1000000
nEstimatePhotons = 1000
estimateDist = 25.0
estimateEllipseScale = 0.2
maxPhotonBounce = 10
enableConeFilter = true
coneFilterK = 1.1   # kに比例してWeightが軽くなる

[CausticPhotonMap]
enable = true
#nPhotons = 40000
nPhotons = 400000
nMaxStorePhotons = 4000000
nEstimatePhotons = 200
estimateDist = 4
estimateEllipseScale = 0.2
enableConeFilter = true
coneFilterK = 1.1   # kに比例してWeightが軽くなる
maxPhotonBounce = 40

[ShadowPhotonMap]
enable = true
nPhotons = 30000
nMaxStorePhotons = 100000
nEstimatePhotons = 300
estimateDist = 9.0
estimateEllipseScale = 1.0

[PostEffect]
toneMap.enabled = false
toneMap.keyValue = 0.045

[Camera]
position = 0 12 285
direction = 0 -0.04 -1.0
fovY = 0.5135

/#
[LightSource]
type = POINT
position = 0 0 0
#position = 0 0 0
flux = 25000 25000 25000
#/

/#
[LightSource]
type = AREA
p0 = -5 75  5
p1 = -5 75 -5
p2 =  5 75 -5
p3 =  5 75  5
flux = 50000 50000 50000
nSamples = 16
#/

[LightSource]
type = SPHERE
position = 0 0 0
radius = 5
flux = 50000 50000 50000
#nSamples = 128
nSamples = 64

# 手前がプラス
# @todo emission -> color

[Rectangle] #Left
    p0 = -100  80  200
    p1 = -100 -80  200
    p2 = -100 -80 -200
    p3 = -100  80 -200
    material = CornellRed

[Rectangle] #Right
    p0 = 100  80 -200
    p1 = 100 -80 -200
    p2 = 100 -80  200
    p3 = 100  80  200
    material = CornellBlue

[Rectangle] #Bottom
    p0 = -200 -80 -200
    p1 = -200 -80  200
    p2 =  200 -80  200
    p3 =  200 -80 -200
    material = CornellGray

[Rectangle] #Top
    p0 = -200  80 -200
    p1 = -200  80  200
    p2 =  200  80  200
    p3 =  200  80 -200
    material = CornellGray
	
[Rectangle] #Back
    p0 = -200  80 -200
    p1 = -200 -80 -200
    p2 =  200 -80 -200
    p3 =  200  80 -200
    material = DarkGray

[Sphere]
	radius = 20
	position = 30 -53+20 0
    material = Mirror

[Cuboid]
    scale = 8 8 8
    rotate = 30 30 0
    position = 0 0 -100
    material = Black
    repeat = 7 7 7
    interval = 1
    margin = 0 0 0
    randColor = true

/#
[Sphere]
	radius = 10
	position = 0 0 0
    material = BlueGlass
#/
	
/#
[Sphere]
	radius = 20
	position = 25 -53+20 15
    material = CornellGray
#/

[SceneImport]
    path = "./objs/venusm.obj"
    scale = 0.025 0.025 0.025
    translate = -65 -52 0
    material = Glass2

/#
[SceneImport]
    path = "bin/objs/triangle.obj"
    scale = 40 40 40
    rotate = 0 45 0
	translate = 0 0 0
    material = CornellGray
#/

[NoiseSurface]
    center = 0 -35 0
    scale = 150 3 150
    rotate = 0 0 0
    division = 200 200
    material = Water
    noisyHeight = true
    noisyColor = false
